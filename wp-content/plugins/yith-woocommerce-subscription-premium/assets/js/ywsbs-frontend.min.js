jQuery(function(e){"use strict";var t=e("body"),r={message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0},s=(e.fn.yith_ywsbs_variations=function(){var t=e(".variations_form"),o=t.find(".single_add_to_cart_button");t.on("found_variation",function(t,n){1==n.is_subscription?o.text(yith_ywsbs_frontend.add_to_cart_label):o.text(yith_ywsbs_frontend.default_cart_label)})},t.hasClass("single-product")&&e.fn.yith_ywsbs_variations(),!1),i=!1,d=function(){s.fadeOut("slow")};e(document).on("click",".ywsbs-dropdown-item, .open-modal",function(t){t.stopPropagation();var n,o,t=e(this).data("target");s=e("#"+t),i=s.find(".ywsbs-modal-wrapper"),t=i.width(),n=i.width(),o=e(window).width(),n=(e(window).height()-n)/2+"px",i.css({"margin-top":n,"margin-bottom":n,width:t<o-100?t+"px":"auto"}),s.fadeIn("slow")}),e(document).on("click",".ywsbs-modal .close",function(t){t.preventDefault(),d()}),e(window).on("click",function(t){t=t.target;e(t).hasClass("ywsbs-modal-container")&&d()}),e(document).on("click",".ywsbs-action-button",function(t){t.preventDefault();var n=e(this),o=n.closest(".ywsbs-action-button-wrap"),t=n.closest(".ywsbs-modal-body"),s=t.find(".ywsbs-content-text"),i=t.find(".close-modal-wrap"),t=n.data("action"),a=n.data("id"),c=n.data("nonce");o.block(r),e.ajax({url:yith_ywsbs_frontend.ajaxurl,data:{subscription_id:a,action:"ywsbs_"+t+"_subscription",change_status:t,security:c,context:"frontend"},type:"POST",success:function(t){t.success&&s.html(t.success),t.error&&s.html('<span class="error">'+t.error+"</span>"),n.fadeOut(),i.fadeOut(),setTimeout(function(){d(),e.post(document.location.href,function(t){""!=t&&(t=e("<div></div>").html(t).find(".ywsbs-subscription-view-wrap"),e(".ywsbs-subscription-view-wrap").html(t.html()))})},2500)},complete:function(){o.unblock()}})})});